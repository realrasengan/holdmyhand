const sudo = require('sudo-prompt');
const {exec} = require('child_process');
const SysTray = require('systray').default;
const os = require('os');

const hs = { name: 'Handshake Naming System',
             icns: 'hns.ico' };

const systray = new SysTray({
  menu: {
    icon: "data:image/png;base64,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",
    title: "H",
    tooltip: "Handshake Naming System",
    items: [{
            title: "Enable",
            tooltip: "Instruct system to resolve with Handshake",
            checked: false,
            enabled: true
            }, {
            title: "Exit",
            tooltip: "Exit and Disable Handshake Naming System",
            checked: false,
            enabled: true
            },
        ]
    },
  debug: false,
  copyDir: true
});

systray.onClick(action => {
  if (action.seq_id ===0) {
    if(!action.item.checked) {
      sudo.exec("./on.sh", hs, function(err, stdout, stderr) {
        if(err) throw err;
      });
    }
    else {
      if(os.platform()=='darwin' || os.platform()=='linux') {
        sudo.exec("./off.sh", hs, function(err, stdout, stderr) {
          if(err) throw err;
        });
      }
    }

    systray.sendAction({
      type: 'update-item',
      item: {
        title:"Enable",
        checked: !action.item.checked,
        enabled: true
      },
      seq_id: action.seq_id
    });    
  }
  else if (action.seq_id === 1) {
    systray.kill();
  }
});

